!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t,e){var r=this;this.model=t,this.property=e,this.value=t[e],this.elementBindings=[],this.watchers=[],this.getter=function(){return r.value},this.setter=function(t){var e=r.value;r.value=t;for(var n=0;n<r.elementBindings.length;n++){var i=r.elementBindings[n];i.element[i.attribute]=t}for(var o=0;o<r.watchers.length;o++)r.watchers[o](e,r.value)},this.bind=function(t,e,n){r.elementBindings.push({element:t,attribute:e,attribute:e}),n&&t.addEventListener(n,function(){r.setter(t[e])}),t[e]=r.value},this.watch=function(t){r.watchers.push(t)},Object.defineProperty(t,e,{get:this.getter,set:this.setter}),t[e]=this.value}r.r(e);var i={attributeNames:{bind:"ps-bind",if:"ps-if",each:"ps-each",eachValueTarget:"ps-each-value-target"},arrayMutatorMethods:["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]};function o(t,e){var r=this;this.model=t,this.property=e,this.originalObject=t[e],this.proxyObject,this.watchers=[],this.atomicOperationOngoing=!1,this._executeAsAtomicOperation=function(t,e){var n=r.proxyObject,i=Array.isArray(n)?[]:{};Object.assign(i,n),r.atomicOperationOngoing=!0,t.apply(n,e),r.atomicOperationOngoing=!1;for(var o=0;o<r.watchers.length;o++)r.watchers[o](i,n)},this.individualGetter=function(t,e){return t[e]},this.individualSetter=function(t,e,n){var i=Array.isArray(t)?[]:{};if(Object.assign(i,t),t[e]=n,!r.atomicOperationOngoing)for(var o=0;o<r.watchers.length;o++)r.watchers[o](i,t);return!0},this.getter=function(){return r.proxyObject},this.setter=function(t){if(!Array.isArray(t))throw new Error("Cannot assign non-Array value to Array property");var e=r.proxyObject,n=[];Object.assign(n,e),r.atomicOperationOngoing=!0,e.length=0,e.push.apply(e,t),r.atomicOperationOngoing=!1;for(var i=0;i<r.watchers.length;i++)r.watchers[i](n,e);return!0},this.bind=function(t,e,n){console.warn("Cannot bind to object values directly. Use watchers instead.","\n(Tried to bind\t",t,"\n\t\t\tto\t",r.proxyObject,")")},this.watch=function(t){r.watchers.push(t)},this.proxyObject=new Proxy(this.originalObject,{get:r.individualGetter,set:r.individualSetter});for(var n=i.arrayMutatorMethods,o=0;o<n.length;o++){var a=n[o];this.proxyObject[a]=function(t){return function(){var e=Array.prototype[t];r._executeAsAtomicOperation(e,arguments)}}(a)}this.model[this.property]=this.proxyObject,Object.defineProperty(this.model,this.property,{get:this.getter,set:this.setter})}function a(t,e){if(void 0===t[e])throw new ReferenceError("Cannot bind to unknown property "+e);if("object"!=typeof t[e])return new n(t,e);if(Array.isArray(t[e]))return new o(t,e);throw new Error("Cannot bind to objects")}var s=function(t){return function(e,r){t.style.display=r?"":"none"}},l=i.attributeNames,u=function(t,e){return function(r,n){for(;t.firstChild;)t.removeChild(t.firstChild);for(var i=0;i<n.length;i++){var o=e.cloneNode(!0),a=o.querySelectorAll("*["+l.eachValueTarget+"]"),s=o;a.length>0&&(a.length>1&&console.warn("Found more than 1 value targets in iterated element",e,"Using the first one"),s=a[0]);var u=s.getAttribute(l.eachValueTarget);u?s.setAttribute(u,n[i]):s.textContent=n[i],t.appendChild(o)}}},h=function(t){if("string"!=typeof t)return null;for(var e=t.split(","),r=[],n=0;n<e.length;n++){for(var i=e[n].trim().split(":"),o={variable:null,attribute:"textContent",event:null},a=0;a<i.length;a++){var s=i[a].trim();switch(a){case 0:o.variable=s||null;break;case 1:o.attribute=s||"textContent";break;case 2:o.event=s||null}}o.variable&&r.push(o)}return r.length?r:null},c=i.attributeNames;window.Prosecco=function(t,e){var r=this;this.rootElement=t,this.model=e,this.boundElements=t.querySelectorAll("*["+c.bind+"]"),this.conditionalElements=t.querySelectorAll("*["+c.if+"]"),this.iteratedElements=t.querySelectorAll("*["+c.each+"]"),this.bindings=[],this._getBindingFor=function(t){if(!r.model.hasOwnProperty(t))return null;var e=r.bindings.filter(function(e){return e.model.hasOwnProperty(t)&&e.property==t});if(0===e.length)return null;if(e.length>1)throw new Error("Found duplicate bindings for property "+t);return 1===e.length?e[0]:void 0},this.watch=function(t,e){try{var n=r._getBindingFor(t);n||(n=new a(r.model,t),r.bindings.push(n)),n.watch(e)}catch(t){console.error(t)}};for(var n=this.rootElement.parentNode;["HEAD","BODY","HTML"].indexOf(n.tagName)<0;){if(console.log(n),n.hasAttribute("ps-app-root"))throw new SyntaxError("App nesting is not allowed");n=n.parentNode}this.rootElement.setAttribute("ps-app-root",!0);for(var i=0;i<this.boundElements.length;i++){var o=(O=this.boundElements[i]).getAttribute(c.bind),l=h(o);if(l)for(var d=0;d<l.length;d++){var f=l[d],p=f.variable,g=f.attribute,b=f.event,v=this._getBindingFor(p);if(v)v.bind(O,g,b);else{var y=new a(this.model,p);y.bind(O,g,b),this.bindings.push(y)}}}for(d=0;d<this.conditionalElements.length;d++){var m=(O=this.conditionalElements[d]).getAttribute(c.if);this.watch(m,s(O)),s(O)(null,this.model[m])}for(var w=0;w<this.iteratedElements.length;w++){var O,A=(O=this.iteratedElements[w]).parentNode,j=document.createElement("div"),x=O.getAttribute(c.each);j.setAttribute("ps-each-container",!0),A.insertBefore(j,O),A.removeChild(O),this.watch(x,u(j,O)),u(j,O)(null,this.model[x])}}}]);